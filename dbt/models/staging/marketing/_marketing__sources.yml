version: 2
sources:
  - name: bronze_marketing
    database: "{{ env_var('DBT_BRONZE_DB', 'BRONZE') }}"
    schema: BRONZE_MARKETING
    config:
      loaded_at_field: _FIVETRAN_SYNCED
      freshness:
        warn_after: {count: 26, period: hour}
        error_after: {count: 48, period: hour}
    tables:
      - name: MARKETING_CAMPAIGNS
        description: "Campaign master with spend and acquisition metrics."
        columns:
          - name: CAMPAIGN_ID
            description: "Unique campaign ID"
          - name: CAMPAIGN_NAME
            description: "Campaign name"
          - name: CAMPAIGN_CODE
            description: "Campaign code"
          - name: CHANNEL
            description: "Marketing channel"
          - name: SUB_CHANNEL
            description: "Sub-channel"
          - name: START_DATE
            description: "Start date"
          - name: END_DATE
            description: "End date"
          - name: TOTAL_SPEND
            description: "Total spend"
          - name: CUSTOMERS_ACQUIRED
            description: "Customers acquired"
          - name: STATUS
            description: "Status"
          - name: LAST_MODIFIED_DATE
            description: "Last modification timestamp (audit trail)"
          - name: _FIVETRAN_SYNCED
            description: "Fivetran sync timestamp"
          - name: _FIVETRAN_DELETED
            description: "Fivetran soft delete flag"